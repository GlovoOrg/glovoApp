<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                      http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.29.xsd"
        objectQuotingStrategy="QUOTE_ONLY_RESERVED_WORDS">
    <changeSet id="1737707694295-1" author="malibuchka">
        <createSequence incrementBy="1" sequenceName="addresses_id_seq" startValue="1"/>
    </changeSet>
    <changeSet id="1737707694295-2" author="malibuchka">
        <createSequence incrementBy="1" sequenceName="cart_id_seq" startValue="1"/>
    </changeSet>
    <changeSet id="1737707694295-3" author="malibuchka">
        <createSequence incrementBy="1" sequenceName="cart_items_id_seq" startValue="1"/>
    </changeSet>
    <changeSet id="1737707694295-4" author="malibuchka">
        <createSequence incrementBy="1" sequenceName="caterories_id_seq" startValue="1"/>
    </changeSet>
    <changeSet id="1737707694295-5" author="malibuchka">
        <createSequence incrementBy="1" sequenceName="discounts_id_seq" startValue="1"/>
    </changeSet>
    <changeSet id="1737707694295-6" author="malibuchka">
        <createSequence incrementBy="1" sequenceName="establishment_filter_id_seq" startValue="1"/>
    </changeSet>
    <changeSet id="1737707694295-7" author="malibuchka">
        <createSequence incrementBy="1" sequenceName="establishments_id_seq" startValue="1"/>
    </changeSet>
    <changeSet id="1737707694295-8" author="malibuchka">
        <createSequence incrementBy="1" sequenceName="oder_details_id_seq" startValue="1"/>
    </changeSet>
    <changeSet id="1737707694295-9" author="malibuchka">
        <createSequence incrementBy="1" sequenceName="order_items_id_seq" startValue="1"/>
    </changeSet>
    <changeSet id="1737707694295-10" author="malibuchka">
        <createSequence incrementBy="1" sequenceName="payment_details_id_seq" startValue="1"/>
    </changeSet>
    <changeSet id="1737707694295-11" author="malibuchka">
        <createSequence incrementBy="1" sequenceName="products_id_seq" startValue="1"/>
    </changeSet>
    <changeSet id="1737707694295-12" author="malibuchka">
        <createSequence incrementBy="1" sequenceName="refresh_tokens_id_seq" startValue="1"/>
    </changeSet>
    <changeSet id="1737707694295-13" author="malibuchka">
        <createSequence incrementBy="1" sequenceName="roles_id_seq" startValue="1"/>
    </changeSet>
    <changeSet id="1737707694295-14" author="malibuchka">
        <createSequence incrementBy="1" sequenceName="subcategories_id_seq" startValue="1"/>
    </changeSet>
    <changeSet id="1737707694295-15" author="malibuchka">
        <createSequence incrementBy="1" sequenceName="users_id_seq" startValue="1"/>
    </changeSet>
    <changeSet id="1737707694295-16" author="malibuchka">
        <createTable tableName="addresses">
            <column name="created_time" type="timestamp"/>
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="addresses_pkey"/>
            </column>
            <column name="order_detail_id" type="BIGINT"/>
            <column name="updated_time" type="timestamp"/>
            <column name="address_line" type="VARCHAR(255)"/>
            <column name="peculiarity" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet id="1737707694295-17" author="malibuchka">
        <createTable tableName="cart">
            <column name="total_charge" type="DOUBLE precision">
                <constraints nullable="false"/>
            </column>
            <column name="created_time" type="timestamp"/>
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="cart_pkey"/>
            </column>
            <column name="updated_time" type="timestamp"/>
            <column name="user_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet id="1737707694295-18" author="malibuchka">
        <createTable tableName="cart_items">
            <column name="one_product_price_cart" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="quantity" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="quantity_of_products" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="cart_id" type="BIGINT"/>
            <column name="created_time" type="timestamp"/>
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="cart_items_pkey"/>
            </column>
            <column name="order_detail_id" type="BIGINT"/>
            <column name="product_id" type="BIGINT"/>
            <column name="updated_time" type="timestamp"/>
        </createTable>
    </changeSet>
    <changeSet id="1737707694295-19" author="malibuchka">
        <createTable tableName="caterories">
            <column name="created_time" type="timestamp"/>
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="caterories_pkey"/>
            </column>
            <column name="updated_time" type="timestamp"/>
            <column name="image" type="VARCHAR(255)"/>
            <column name="name" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet id="1737707694295-20" author="malibuchka">
        <createTable tableName="discounts">
            <column name="active" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="discount" type="DOUBLE precision">
                <constraints nullable="false"/>
            </column>
            <column name="created_time" type="timestamp"/>
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="discounts_pkey"/>
            </column>
            <column name="product_id" type="BIGINT"/>
            <column name="updated_time" type="timestamp"/>
        </createTable>
    </changeSet>
    <changeSet id="1737707694295-21" author="malibuchka">
        <createTable tableName="establishment_filter">
            <column name="created_time" type="timestamp"/>
            <column name="establishment_id" type="BIGINT"/>
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="establishment_filter_pkey"/>
            </column>
            <column name="updated_time" type="timestamp"/>
            <column name="name" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet id="1737707694295-22" author="malibuchka">
        <createTable tableName="establishments">
            <column name="is_open" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="price_of_delivery" type="DOUBLE precision">
                <constraints nullable="false"/>
            </column>
            <column name="quantity_of_ratings" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="rating" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="time_od_delivery" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="created_time" type="timestamp"/>
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="establishments_pkey"/>
            </column>
            <column name="subcategory_id" type="BIGINT"/>
            <column name="updated_time" type="timestamp"/>
            <column name="image" type="VARCHAR(255)"/>
            <column name="name" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet id="1737707694295-23" author="malibuchka">
        <createTable tableName="oder_details">
            <column name="total_amount" type="DOUBLE precision">
                <constraints nullable="false"/>
            </column>
            <column name="created_time" type="timestamp"/>
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="oder_details_pkey"/>
            </column>
            <column name="updated_time" type="timestamp"/>
            <column name="user_id" type="BIGINT"/>
            <column name="status" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet id="1737707694295-24" author="malibuchka">
        <createTable tableName="order_items">
            <column name="one_product_price_order" type="DOUBLE precision">
                <constraints nullable="false"/>
            </column>
            <column name="quantity" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="created_time" type="timestamp"/>
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="order_items_pkey"/>
            </column>
            <column name="order_detail_id" type="BIGINT"/>
            <column name="product_id" type="BIGINT"/>
            <column name="updated_time" type="timestamp"/>
        </createTable>
    </changeSet>
    <changeSet id="1737707694295-25" author="malibuchka">
        <createTable tableName="payment_details">
            <column name="is_paid" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="created_time" type="timestamp"/>
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="payment_details_pkey"/>
            </column>
            <column name="order_detail_id" type="BIGINT"/>
            <column name="updated_time" type="timestamp"/>
            <column name="provider" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet id="1737707694295-26" author="malibuchka">
        <createTable tableName="product_establishment_filter">
            <column name="establishment_filter_id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="product_establishment_filter_pkey"/>
            </column>
            <column name="product_id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="product_establishment_filter_pkey"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="1737707694295-27" author="malibuchka">
        <createTable tableName="products">
            <column name="active" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="price" type="DOUBLE precision">
                <constraints nullable="false"/>
            </column>
            <column name="created_time" type="timestamp"/>
            <column name="establishment_id" type="BIGINT"/>
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="products_pkey"/>
            </column>
            <column name="updated_time" type="timestamp"/>
            <column name="description" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="image" type="VARCHAR(255)"/>
            <column name="name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="1737707694295-28" author="malibuchka">
        <createTable tableName="refresh_tokens">
            <column name="created_time" type="timestamp"/>
            <column name="expiry_date" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="refresh_tokens_pkey"/>
            </column>
            <column name="updated_time" type="timestamp"/>
            <column name="user_id" type="BIGINT"/>
            <column name="token" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="1737707694295-29" author="malibuchka">
        <createTable tableName="roles">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="roles_pkey"/>
            </column>
            <column name="name" type="VARCHAR(20)"/>
        </createTable>
    </changeSet>
    <changeSet id="1737707694295-30" author="malibuchka">
        <createTable tableName="subcategories">
            <column name="category_id" type="BIGINT"/>
            <column name="created_time" type="timestamp"/>
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="subcategories_pkey"/>
            </column>
            <column name="updated_time" type="timestamp"/>
            <column name="image" type="VARCHAR(255)"/>
            <column name="name" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet id="1737707694295-31" author="malibuchka">
        <createTable tableName="user_roles">
            <column name="role_id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="user_roles_pkey"/>
            </column>
            <column name="user_id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="user_roles_pkey"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="1737707694295-32" author="malibuchka">
        <createTable tableName="users">
            <column name="created_time" type="timestamp"/>
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="users_pkey"/>
            </column>
            <column name="updated_time" type="timestamp"/>
            <column name="email" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="password" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="status" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="username" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="1737707694295-33" author="malibuchka">
        <addUniqueConstraint columnNames="order_detail_id" constraintName="addresses_order_detail_id_key"
                             tableName="addresses"/>
    </changeSet>
    <changeSet id="1737707694295-34" author="malibuchka">
        <addUniqueConstraint columnNames="user_id" constraintName="cart_user_id_key" tableName="cart"/>
    </changeSet>
    <changeSet id="1737707694295-35" author="malibuchka">
        <addUniqueConstraint columnNames="product_id" constraintName="discounts_product_id_key" tableName="discounts"/>
    </changeSet>
    <changeSet id="1737707694295-36" author="malibuchka">
        <addUniqueConstraint columnNames="order_detail_id" constraintName="payment_details_order_detail_id_key"
                             tableName="payment_details"/>
    </changeSet>
    <changeSet id="1737707694295-37" author="malibuchka">
        <addUniqueConstraint columnNames="token" constraintName="refresh_tokens_token_key" tableName="refresh_tokens"/>
    </changeSet>
    <changeSet id="1737707694295-38" author="malibuchka">
        <addUniqueConstraint columnNames="user_id" constraintName="refresh_tokens_user_id_key"
                             tableName="refresh_tokens"/>
    </changeSet>
    <changeSet id="1737707694295-39" author="malibuchka">
        <addUniqueConstraint columnNames="email" constraintName="users_email_key" tableName="users"/>
    </changeSet>
    <changeSet id="1737707694295-40" author="malibuchka">
        <addUniqueConstraint columnNames="username" constraintName="users_username_key" tableName="users"/>
    </changeSet>
    <changeSet id="1737707694295-41" author="malibuchka">
        <addForeignKeyConstraint baseColumnNames="user_id" baseTableName="refresh_tokens"
                                 constraintName="fk1lih5y2npsf8u5o3vhdb9y0os" onDelete="NO ACTION"
                                 referencedColumnNames="id" referencedTableName="users"/>
    </changeSet>
    <changeSet id="1737707694295-42" author="malibuchka">
        <addForeignKeyConstraint baseColumnNames="product_id" baseTableName="cart_items"
                                 constraintName="fk1re40cjegsfvw58xrkdp6bac6" onDelete="NO ACTION"
                                 referencedColumnNames="id" referencedTableName="products"/>
    </changeSet>
    <changeSet id="1737707694295-43" author="malibuchka">
        <addForeignKeyConstraint baseColumnNames="category_id" baseTableName="subcategories"
                                 constraintName="fk20cyy6b6m2c8ayydbydiyh4ty" onDelete="NO ACTION"
                                 referencedColumnNames="id" referencedTableName="caterories"/>
    </changeSet>
    <changeSet id="1737707694295-44" author="malibuchka">
        <addForeignKeyConstraint baseColumnNames="establishment_filter_id" baseTableName="product_establishment_filter"
                                 constraintName="fk67jlnkysgwia5cpoycys1luca" onDelete="NO ACTION"
                                 referencedColumnNames="id" referencedTableName="establishment_filter"/>
    </changeSet>
    <changeSet id="1737707694295-45" author="malibuchka">
        <addForeignKeyConstraint baseColumnNames="cart_id" baseTableName="cart_items"
                                 constraintName="fk99e0am9jpriwxcm6is7xfedy3" onDelete="NO ACTION"
                                 referencedColumnNames="id" referencedTableName="cart"/>
    </changeSet>
    <changeSet id="1737707694295-46" author="malibuchka">
        <addForeignKeyConstraint baseColumnNames="establishment_id" baseTableName="products"
                                 constraintName="fk99gib6u0rm71m4vr6qdfj33is" onDelete="NO ACTION"
                                 referencedColumnNames="id" referencedTableName="establishments"/>
    </changeSet>
    <changeSet id="1737707694295-47" author="malibuchka">
        <addForeignKeyConstraint baseColumnNames="user_id" baseTableName="oder_details"
                                 constraintName="fk9d0x5vyq49vnbweulmqva2by8" onDelete="NO ACTION"
                                 referencedColumnNames="id" referencedTableName="users"/>
    </changeSet>
    <changeSet id="1737707694295-48" author="malibuchka">
        <addForeignKeyConstraint baseColumnNames="order_detail_id" baseTableName="order_items"
                                 constraintName="fkdhh3gdb2b37e9rmoc7o80t2qg" onDelete="NO ACTION"
                                 referencedColumnNames="id" referencedTableName="oder_details"/>
    </changeSet>
    <changeSet id="1737707694295-49" author="malibuchka">
        <addForeignKeyConstraint baseColumnNames="product_id" baseTableName="discounts"
                                 constraintName="fke3tqxsyxv7qcy8uvf2lns1hx8" onDelete="NO ACTION"
                                 referencedColumnNames="id" referencedTableName="products"/>
    </changeSet>
    <changeSet id="1737707694295-50" author="malibuchka">
        <addForeignKeyConstraint baseColumnNames="user_id" baseTableName="cart"
                                 constraintName="fkg5uhi8vpsuy0lgloxk2h4w5o6" onDelete="NO ACTION"
                                 referencedColumnNames="id" referencedTableName="users"/>
    </changeSet>
    <changeSet id="1737707694295-51" author="malibuchka">
        <addForeignKeyConstraint baseColumnNames="order_detail_id" baseTableName="addresses"
                                 constraintName="fkgcx7nsxiu236y2ax9vj0xppra" onDelete="NO ACTION"
                                 referencedColumnNames="id" referencedTableName="oder_details"/>
    </changeSet>
    <changeSet id="1737707694295-52" author="malibuchka">
        <addForeignKeyConstraint baseColumnNames="subcategory_id" baseTableName="establishments"
                                 constraintName="fkgfsgl8rfxapyxy7d4ti2mxh9b" onDelete="NO ACTION"
                                 referencedColumnNames="id" referencedTableName="subcategories"/>
    </changeSet>
    <changeSet id="1737707694295-53" author="malibuchka">
        <addForeignKeyConstraint baseColumnNames="role_id" baseTableName="user_roles"
                                 constraintName="fkh8ciramu9cc9q3qcqiv4ue8a6" onDelete="NO ACTION"
                                 referencedColumnNames="id" referencedTableName="roles"/>
    </changeSet>
    <changeSet id="1737707694295-54" author="malibuchka">
        <addForeignKeyConstraint baseColumnNames="user_id" baseTableName="user_roles"
                                 constraintName="fkhfh9dx7w3ubf1co1vdev94g3f" onDelete="NO ACTION"
                                 referencedColumnNames="id" referencedTableName="users"/>
    </changeSet>
    <changeSet id="1737707694295-55" author="malibuchka">
        <addForeignKeyConstraint baseColumnNames="order_detail_id" baseTableName="cart_items"
                                 constraintName="fkiytsqkerby5lbk3h7ppl163hg" onDelete="NO ACTION"
                                 referencedColumnNames="id" referencedTableName="oder_details"/>
    </changeSet>
    <changeSet id="1737707694295-56" author="malibuchka">
        <addForeignKeyConstraint baseColumnNames="product_id" baseTableName="product_establishment_filter"
                                 constraintName="fko6picab5kbupg2p2ddreag88r" onDelete="NO ACTION"
                                 referencedColumnNames="id" referencedTableName="products"/>
    </changeSet>
    <changeSet id="1737707694295-57" author="malibuchka">
        <addForeignKeyConstraint baseColumnNames="product_id" baseTableName="order_items"
                                 constraintName="fkocimc7dtr037rh4ls4l95nlfi" onDelete="NO ACTION"
                                 referencedColumnNames="id" referencedTableName="products"/>
    </changeSet>
    <changeSet id="1737707694295-58" author="malibuchka">
        <addForeignKeyConstraint baseColumnNames="establishment_id" baseTableName="establishment_filter"
                                 constraintName="fkpfqqmum5lho8ikuqesl8lt40h" onDelete="NO ACTION"
                                 referencedColumnNames="id" referencedTableName="establishments"/>
    </changeSet>
    <changeSet id="1737707694295-59" author="malibuchka">
        <addForeignKeyConstraint baseColumnNames="order_detail_id" baseTableName="payment_details"
                                 constraintName="fkvaf2i6q11n9pu08i8wib9xqq" onDelete="NO ACTION"
                                 referencedColumnNames="id" referencedTableName="oder_details"/>
    </changeSet>

</databaseChangeLog>